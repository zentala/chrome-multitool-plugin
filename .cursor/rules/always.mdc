---
description: 
globs: 
alwaysApply: true
---
# Always

## General

- **Work in YOLO mode:**  
  Trust your judgment. I have aligned with you on this — **DO NOT ask for permission**.  
  If unsure, follow tasks from `TODO.md`.

- **Context awareness:**  
  Always refer to `./.cursor/CURSOR.md` for project overview and context.  
  Update it when significant decisions are made.

- **Task tracking:**  
  - Maintain and follow `./.cursor/TODO.md`.
  - Create subtodo files: `./.cursor/TODO_<name>.md` for subprojects and link them in the main TODO.
  - Use `[ ]` for open tasks and `[x]` for completed ones.
  - Refactor old TODOs to this checkbox format.
  - Update TODOs immediately after completing changes.

- **Metadata and documentation:**  
  - Each important folder must have a `.meta.md` file describing its purpose and structure.
  - Maintain a `.cursor/WHY.md` explaining key architectural decisions.
  - Log major decisions in `.cursor/DECISIONS_<date>.md`.
  - Log all failed technical experiments in `.cursor/failedexperiments/`.
  - Maintain a `.cursor/ERRORS.md` for known issues and solutions.
  - Document typical mistakes in `.cursor/CODE_SMELLS.md`.
  - Maintain a weekly developer mood log in `.cursor/DEV_MOOD_TRACKER.md`.
  - Capture project values and philosophy in `.cursor/PHILOSOPHY.md`.
  - Collect programming wisdom and reminders in `.cursor/RANDOM_WISDOM.md`.
  - For important modules, create `.usage.md` files explaining usage examples.
  - Create lightweight diagrams for complex logic in `.cursor/DIAGRAMS/`.

---

## Commits

- Commit **after every completed task**.
- Use **Conventional Commits** format.
- Always `git status` before commit and **try to commit all relevant changes** together.
- Write commit messages **for junior developers**:
  - Explain **what** was done.
  - Explain **why** it was done.
- Lint and test code before committing.

---

## Terminal

- Use **PowerShell 7** (`pwsh`) on **Windows 11**.
- Use **pnpm** as the package manager.
- Log any terminal problems into `./.cursor/PWSH_ISSUES.md`, providing:
  - Problem description
  - Workarounds that work
  - Best practices you recommend
- Prefer **non-interactive mode** for commands when possible.

---

## Code and Documentation Style

- Write **junior-friendly code and documentation**:
  - Use **TSDoc comments** on exported functions, classes, complex logic.
  - Add **TODO** and **FIXME** in code to mark future improvements or known issues.
  - If fixing a problem:
    - Document **which approaches were tried and failed**.
    - Optionally create a `.md` notes file next to the code (`<filename>.ts.md`).

- Maintain folder cleanliness:
  - After major changes, **remove or archive outdated files**.
  - Update related `.meta.md` and `TODO.md` if structure or plans change.

---

## Testing

- Tests don't have to cover everything initially.
- If skipping a hard-to-test part:
  - Leave a **comment** explaining what was skipped and why.
  - Add `TODO` or `FIXME` for future improvement.
- Prioritize testing core logic over minor UI behaviors unless critical.

---

## Cursor and Tools Behavior

- If you experience editing issues (e.g., file won't update):
  - **Pause work immediately** and **ask the user to restart Cursor**.
  - After restart, continue work.

---

# ✨ Notes for Better Context Maintenance

- Regularly refresh all files under `.cursor/`.
- Enforce Stale Checks to ensure documentation, diagrams, and TODOs are up-to-date.
- Prefer lightweight but accurate diagrams (`.puml` or simple `.md`) for non-trivial flows.
- Document what didn't work, not only what did — build context over time.

## Generowanie dokumentacji

Używaj zawsze gotowych skryptów:

### Foldery i moduły:

- `.meta.md`:

```pwsh
.\.cursor\scripts\gen-meta.ps1 "src/components"
```

- `.usage.md`:

```pwsh
.\.cursor\scripts\gen-usage.ps1 "src/hooks/useFetch.ts"
```

### Pliki dokumentacyjne w `.cursor/`:

- Nowa decyzja:

```pwsh
.\.cursor\scripts\gen-cursor-doc.ps1 -Type "decision" -Title "use-react-query"
```

- Nowy wpis mood:

```pwsh
.\.cursor\scripts\gen-cursor-doc.ps1 -Type "mood" -Title "week-17-2025"
```

- Nowy błąd:

```pwsh
.\.cursor\scripts\gen-cursor-doc.ps1 -Type "error" -Title "auth-token-expiry-bug"
```

- Nowy nieudany eksperyment:

```pwsh
.\.cursor\scripts\gen-cursor-doc.ps1 -Type "failed-experiment" -Title "replace-redux-with-zustand"
```

Szablony są zawsze w `.cursor/TEMPLATES/`.

